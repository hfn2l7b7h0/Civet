import assert from "assert"
import ts from "typescript"

describe "ts stuff", ->
  it "should parse tsconfig", ->
    tsConfigPath := "tsconfig.json"
    { config } := ts.readConfigFile(tsConfigPath, ts.sys.readFile)

    currentProjectPath := "./"

    existingOptions := {}

    config2 := ts.parseJsonConfigFileContent(
      config,
      ts.sys,
      currentProjectPath,
      existingOptions,
      tsConfigPath,
      undefined,
      [{
        extension: "civet",
        isMixedContent: false,
        // Note: in order for parsed config to include *.ext files, scriptKind must be set to Deferred.
        // See: https://github.com/microsoft/TypeScript/blob/2106b07f22d6d8f2affe34b9869767fa5bc7a4d9/src/compiler/utilities.ts#L6356
        scriptKind: ts.ScriptKind.Deferred
      }]
    )

    // console.log config, config2

    host := ts.createCompilerHost(config2)
    service := ts.createLanguageService(host)

    console.log host, service
